"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[7057],{15045:function(e,r,t){t.r(r),t.d(r,{default:function(){return P}});var n=t(94577),a=t(72341),i=t(84398),o=t(62827),l=t(72791),s=t(74165),c=t(75971);function u(e,r,t,n,a,i,o){return(0,c.__awaiter)(this,void 0,void 0,(0,s.Z)().mark((function e(){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n.activityRequest,!o||!r){e.next=6;break}return r.authCode=o,r.retryAsync(),e.abrupt("return",[!1,void 0]);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[!0,void 0]);case 11:return e.abrupt("return",[!0,void 0]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))}var d,m,v=t(29439),p=t(20112),f=t(80111),h=t(13425),b=t(3965),g=t(4927),x=t(81318),E=t(97708),k=t(90110);!function(e){e.title="signin-card-title"}(d||(d={})),function(e){e.initial="You need to sign in to see the card content.",e.retry="Sign in failed. Please retry sign in to see the card content."}(m||(m={}));var y=function(e){return e>0?m.retry:m.initial},S=function(e){var r=e.handleRetryWithToken,t=l.useState(!1),a=(0,v.Z)(t,2),o=a[0],u=a[1],m=(0,n.R)(),S=m.cardData,w=m.urlData,C=(0,i.o)(),N=C.metaOSProvider,P=C.cardChannelProvider,_=(0,p.R)().setCardData,D=(0,f.T)().theme,R=(0,h.p)(D),Z=S.payload,T=l.useState(0),z=(0,v.Z)(T,2),I=z[0],U=z[1],q=l.useCallback((function(){return(0,c.__awaiter)(void 0,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t=function e(t){return(0,c.__awaiter)(void 0,void 0,void 0,(0,s.Z)().mark((function n(){var a,i,o,l,c,d,m;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===(a=N.openAuth)||void 0===a?void 0:a.call(N,S.appId,t);case 2:return i=n.sent,o=!0===(null===i||void 0===i?void 0:i.status)?i.message:void 0,n.next=6,r(w,S,S.appId,t,_,P,o);case 6:if(l=n.sent,c=(0,v.Z)(l,2),d=c[0],m=c[1],!d){n.next=17;break}if(!m){n.next=16;break}return n.next=14,e(m);case 14:n.next=17;break;case 16:U(I+1);case 17:u(!1);case 18:case"end":return n.stop()}}),n)})))},e.next=4,t(Z);case 4:case"end":return e.stop()}}),e)})))}),[Z,N,S,r,w,_,P,I]);return l.createElement(g.K,{tokens:{childrenGap:10},className:R.cardStack},l.createElement(g.K.Item,{align:"auto"},l.createElement(b.h,{className:R.cardTitle,content:y(I),datatid:d.title})),l.createElement(g.K.Item,{align:"baseline"},l.createElement(x.a,{className:R.cardButton,disabled:o,onClick:q,text:"Sign In"},o&&l.createElement(E.$,{size:k.E.small}))))},w=function(){return l.createElement(S,{handleRetryWithToken:u})};function C(e,r,t,n,a,i,o){return(0,c.__awaiter)(this,void 0,void 0,(0,s.Z)().mark((function l(){var c;return(0,s.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null===e||void 0===e?void 0:e.url){l.next=2;break}return l.abrupt("return",[!1,void 0]);case 2:if(l.prev=2,!o){l.next=11;break}return l.next=6,i.unfurl(e.url,t,o,n.type);case 6:return c=l.sent,a(Object.assign(Object.assign({},r),c)),l.abrupt("return",[!1,void 0]);case 11:if("silentAuth"!==n.type){l.next=25;break}if(n.requiresUserConsent){l.next=16;break}n.requiresUserConsent=!0,l.next=22;break;case 16:if(!n.authUrl){l.next=21;break}n.type="auth",n.requiresUserConsent=!0,l.next=22;break;case 21:case 25:return l.abrupt("return",[!0,void 0]);case 22:return l.abrupt("return",[!0,n]);case 26:l.next=31;break;case 28:return l.prev=28,l.t0=l.catch(2),l.abrupt("return",[!0,void 0]);case 31:case"end":return l.stop()}}),l,null,[[2,28]])})))}var N=function(){var e=(0,n.R)(),r=e.urlData,t=e.cardDataHandler,i=(0,a.v)().logger;return(null===r||void 0===r?void 0:r.url)?l.createElement(S,{handleRetryWithToken:C}):(i.logEvent("error","NoUrlFound"),null===t||void 0===t||t.rejector(),l.createElement(o.F,{message:"Unable to render the card"}))},P=function(){var e=(0,n.R)(),r=e.cardData,t=e.cardDataHandler,s=(0,a.v)(),c=s.logger,u=s.baseCardPerfMarker,d=(0,i.o)(),m=d.metaOSProvider,v=d.cardChannelProvider;if(l.useEffect((function(){u.end()}),[u]),!m||!v||!(null===r||void 0===r?void 0:r.appId)){return c.logEvent("error","NoMetaOSProvider"),null===t||void 0===t||t.rejector(),l.createElement(o.F,{message:"Unable to render the card"})}return"CardAction"===r.payload.authScenario?l.createElement(w,null):l.createElement(N,null)}},97708:function(e,r,t){t.d(r,{$:function(){return h}});var n=t(19482),a=t(75971),i=t(72791),o=t(90110),l=t(41693),s=t(73341),c=t(29577),u=(0,l.y)(),d=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,a.__extends)(r,e),r.prototype.render=function(){var e=this.props,r=e.type,t=e.size,n=e.ariaLabel,l=e.ariaLive,d=e.styles,m=e.label,v=e.theme,p=e.className,f=e.labelPosition,h=n,b=(0,s.pq)(this.props,s.n7,["size"]),g=t;void 0===g&&void 0!==r&&(g=r===o.d.large?o.E.large:o.E.medium);var x=u(d,{theme:v,size:g,className:p,labelPosition:f});return i.createElement("div",(0,a.__assign)({},b,{className:x.root}),i.createElement("div",{className:x.circle}),m&&i.createElement("div",{className:x.label},m),h&&i.createElement("div",{role:"status","aria-live":l},i.createElement(c.U,null,i.createElement("div",{className:x.screenReaderText},h))))},r.defaultProps={size:o.E.medium,ariaLive:"polite",labelPosition:"bottom"},r}(i.Component),m=t(42110),v=t(3717),p={root:"ms-Spinner",circle:"ms-Spinner-circle",label:"ms-Spinner-label"},f=(0,v.NF)((function(){return(0,m.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}})})),h=(0,n.z)(d,(function(e){var r,t=e.theme,n=e.size,i=e.className,l=e.labelPosition,s=t.palette,c=(0,m.Cn)(p,t);return{root:[c.root,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},"top"===l&&{flexDirection:"column-reverse"},"right"===l&&{flexDirection:"row"},"left"===l&&{flexDirection:"row-reverse"},i],circle:[c.circle,{boxSizing:"border-box",borderRadius:"50%",border:"1.5px solid "+s.themeLight,borderTopColor:s.themePrimary,animationName:f(),animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.53,.21,.29,.67)",selectors:(r={},r[m.qJ]=(0,a.__assign)({borderTopColor:"Highlight"},(0,m.xM)()),r)},n===o.E.xSmall&&["ms-Spinner--xSmall",{width:12,height:12}],n===o.E.small&&["ms-Spinner--small",{width:16,height:16}],n===o.E.medium&&["ms-Spinner--medium",{width:20,height:20}],n===o.E.large&&["ms-Spinner--large",{width:28,height:28}]],label:[c.label,t.fonts.small,{color:s.themePrimary,margin:"8px 0 0",textAlign:"center"},"top"===l&&{margin:"0 0 8px"},"right"===l&&{margin:"0 0 0 8px"},"left"===l&&{margin:"0 8px 0 0"}],screenReaderText:m.ul}}),void 0,{scope:"Spinner"})},90110:function(e,r,t){var n,a;t.d(r,{E:function(){return n},d:function(){return a}}),function(e){e[e.xSmall=0]="xSmall",e[e.small=1]="small",e[e.medium=2]="medium",e[e.large=3]="large"}(n||(n={})),function(e){e[e.normal=0]="normal",e[e.large=1]="large"}(a||(a={}))}}]);
//# sourceMappingURL=cardloopcomponent-signincardview.a4c109de.chunk.js.map